<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dados Gerais | Instituto Franciscani</title>
    <link rel="shortcut icon" href="/static/img/logo_if_icon.png" type="" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      :root {
        --primary-color: #00005e;
        --secondary-color: #010146;
        --accent-color: #08083a;
        --light-color: #f8f9fa;
        --dark-color: #212529;
        --success-color: #00b451;
        --warning-color: #f72548;
        --gray-color: #adb5bd;
        --sidebar-width: 250px;
        --header-height: 70px;
        --transition: all 0.3s ease;
        --info-color: #4895ef;
      }

      body {
        background-color: #f5f7fb;
        color: var(--dark-color);
        display: flex;
        min-height: 100vh;
      }

      /* Sidebar */
      .sidebar {
        width: var(--sidebar-width);
        background: linear-gradient(
          to bottom,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        height: 100vh;
        position: fixed;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 20px 0;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        z-index: 1000;
      }

      .sidebar-header {
        padding: 0 20px 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        margin-bottom: 20px;
      }

      .sidebar-header h2 {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .sidebar-header h2 i {
        background: white;
        color: var(--primary-color);
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .sidebar-header img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
      }

      .menu-items {
        list-style: none;
        padding: 0 15px;
      }

      .menu-items li {
        margin-bottom: 5px;
      }

      .menu-items a {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 12px 15px;
        border-radius: 8px;
        transition: var(--transition);
      }

      .menu-items a:hover,
      .menu-items a.active {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .menu-items a i {
        width: 20px;
        text-align: center;
      }

      .sidebar-footer {
        padding: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
      }

      .sidebar-footer a {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 10px 15px;
        border-radius: 8px;
        transition: var(--transition);
      }

      .sidebar-footer a:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      /* Main Content */
      .main-content {
        flex: 1;
        margin-left: var(--sidebar-width);
        padding: 20px;
      }

      /* Header */
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: white;
        padding: 15px 25px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        margin-bottom: 25px;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .user-avatar {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        background: linear-gradient(
          to right,
          var(--accent-color),
          var(--primary-color)
        );
        display: flex; 
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 18px;
      }

      .user-details h4 {
        margin-bottom: 3px;
      }

      .user-details p {
        color: var(--gray-color);
        font-size: 14px;
      }

      .search-bar {
        flex: 1;
        max-width: 400px;
        margin: 0 20px;
        position: relative;
      }

      .search-bar input {
        width: 100%;
        padding: 12px 20px 12px 45px;
        border: none;
        background-color: #f5f7fb;
        border-radius: 25px;
        font-size: 14px;
      }

      .search-bar i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--gray-color);
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .action-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #f5f7fb;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--dark-color);
        cursor: pointer;
        transition: var(--transition);
      }

      .action-icon:hover {
        background-color: var(--primary-color);
        color: white;
      }

      /* Page Title */
      .page-title {
        margin-bottom: 25px;
      }

      .page-title h1 {
        color: var(--primary-color);
        font-size: 28px;
        margin-bottom: 10px;
      }

      .page-title p {
        color: var(--gray-color);
      }

      /* Athletes Table */
      .athletes-table-container {
        background-color: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        margin-bottom: 25px;
      }

      .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .results-count {
        background: var(--accent-color);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
      }

      .table-header h2 {
        color: var(--primary-color);
      }

      .table-actions {
        display: flex;
        gap: 10px;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .btn-primary {
        background-color: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background-color: var(--secondary-color);
      }

      .btn-outline {
        background-color: transparent;
        border: 1px solid #ddd;
      }

      .btn-outline:hover {
        background-color: #f5f7fb;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th,
      td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #eee;
      }

      th {
        color: var(--primary-color);
        font-weight: 600;
      }

      tbody tr {
        transition: var(--transition);
        cursor: pointer;
      }

      tbody tr:hover {
        background-color: #f9f9f9;
      }

      .athlete-info {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .athlete-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(
          to right,
          var(--accent-color),
          var(--primary-color)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }

      .athlete-details h4 {
        margin-bottom: 3px;
        font-size: 15px;
      }

      .athlete-details p {
        color: var(--gray-color);
        font-size: 13px;
      }

      .status-badge {
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
      }

      .status-active {
        background-color: rgba(34, 197, 94, 0.1);
        color: #059669;
        border: 1px solid rgba(34, 197, 94, 0.3);
      }

      .status-inactive {
        background-color: rgba(239, 68, 68, 0.1);
        color: #dc2626;
        border: 1px solid rgba(239, 68, 68, 0.3);
      }

      .status-lesionado {
        background-color: rgba(245, 158, 11, 0.1);
        color: #d97706;
        border: 1px solid rgba(245, 158, 11, 0.3);
      }

      .action-buttons {
        display: flex;
        gap: 10px;
      }

      .action-btn {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: var(--transition);
      }

      .edit-btn {
        background-color: rgba(72, 149, 239, 0.1);
        color: var(--info-color);
      }

      .edit-btn:hover {
        background-color: var(--info-color);
        color: white;
      }

      .evaluate-btn {
        background-color: rgba(255, 193, 7, 0.1);
        color: #ffc107;
      }

      .evaluate-btn:hover {
        background-color: #ffc107;
        color: white;
      }

      .delete-btn {
        background-color: rgba(247, 37, 72, 0.1);
        color: var(--warning-color);
      }

      .delete-btn:hover {
        background-color: var(--warning-color);
        color: white;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        overflow-y: auto;
        padding: 20px;
      }

      .modal-content {
        background-color: white;
        width: 600px;
        max-width: 90%;
        max-height: 90vh;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: var(--accent-color) #f0f0f0;
        /* Compatibilidade Safari */
        -webkit-scrollbar-width: thin;
        -webkit-scrollbar-color: var(--accent-color) #f0f0f0;
      }

      /* Estilização da scrollbar para webkit browsers */
      .modal-content::-webkit-scrollbar {
        width: 8px;
      }

      .modal-content::-webkit-scrollbar-track {
        background: #f0f0f0;
        border-radius: 4px;
      }

      .modal-content::-webkit-scrollbar-thumb {
        background: var(--accent-color);
        border-radius: 4px;
      }

      .modal-content::-webkit-scrollbar-thumb:hover {
        background: var(--primary-color);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
      }

      .modal-header h2 {
        color: var(--primary-color);
      }

      .close-modal {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: var(--gray-color);
      }

      .athlete-modal-header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 25px;
      }

      .athlete-modal-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(
          to right,
          var(--accent-color),
          var(--primary-color)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 30px;
      }

      .athlete-modal-info h3 {
        font-size: 24px;
        margin-bottom: 5px;
      }

      .athlete-modal-info p {
        color: var(--gray-color);
        margin-bottom: 10px;
      }

      .modal-section {
        margin-bottom: 25px;
      }

      .modal-section h4 {
        color: var(--primary-color);
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 1px solid #eee;
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
      }

      .info-item {
        margin-bottom: 15px;
      }

      .info-item label {
        display: block;
        font-weight: 600;
        color: var(--dark-color);
        margin-bottom: 5px;
      }

      .info-item p {
        color: var(--gray-color);
      }

      .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 15px;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #eee;
      }

      /* Estilos para a comparação */
      .comparison-chart {
        width: 100%;
        height: 200px;
        margin-top: 20px;
      }

      .athlete-select {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ddd;
        margin-top: 5px;
      }

      .comparison-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
      }

      .comparison-item {
        flex: 1;
        text-align: center;
        padding: 15px;
        background-color: #f8f9fa;
        border-radius: 8px;
        margin: 0 10px;
      }

      .comparison-value {
        font-size: 24px;
        font-weight: bold;
        color: var(--primary-color);
        margin: 10px 0;
      }

      /* Responsividade */
      @media (max-width: 1200px) {
        .info-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 992px) {
        .sidebar {
          width: 70px;
          overflow: hidden;
        }

        .sidebar-header h2 span,
        .menu-items a span,
        .sidebar-footer a span {
          display: none;
        }

        .main-content {
          margin-left: 70px;
        }
      }

      @media (max-width: 768px) {
        .header {
          flex-direction: column;
          gap: 15px;
          padding: 15px;
        }

        .search-bar {
          max-width: 100%;
          margin: 0;
        }

        .user-info {
          width: 100%;
          justify-content: center;
        }

        .header-actions {
          width: 100%;
          justify-content: center;
        }

        .table-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
        }

        .table-actions {
          width: 100%;
          justify-content: space-between;
        }

        .athlete-info {
          flex-direction: column;
          align-items: flex-start;
          gap: 5px;
        }

        table {
          display: block;
          overflow-x: auto;
        }
      }

      /* Estilos para notificações */
      .notifications-list {
        max-height: 400px;
        overflow-y: auto;
      }

      .notification-item {
        display: flex;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #eee;
        transition: background-color 0.3s ease;
      }

      .notification-item:hover {
        background-color: #f8f9fa;
      }

      .notification-item.unread {
        background-color: #f0f8ff;
        border-left: 4px solid var(--primary-color);
      }

      .notification-content {
        flex: 1;
      }

      .notification-content p {
        margin: 0 0 5px 0;
        font-weight: 500;
      }

      .notification-content small {
        color: var(--gray-color);
        font-size: 12px;
      }

      .unread-dot {
        width: 8px;
        height: 8px;
        background-color: var(--primary-color);
        border-radius: 50%;
        margin-left: 10px;
      }

      /* Estilos para configurações */
      .settings-content {
        margin-bottom: 20px;
      }

      .settings-content .form-group {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #eee;
      }

      .settings-content .form-group:last-child {
        border-bottom: none;
      }

      .settings-content label {
        margin: 0;
        font-weight: 500;
      }

      .settings-content input[type="checkbox"] {
        width: auto;
        margin: 0;
      }

      .settings-content select {
        width: 150px;
        margin: 0;
      }

      /* Estilos Modernos para o Modal de Atleta */
      .modern-modal {
        max-width: 800px;
        max-height: 95vh;
        border-radius: 20px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        overflow: hidden;
        border: none;
        padding: 0;
      }

      .modern-header {
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        color: white;
        padding: 30px;
        margin: 0;
        border-bottom: none;
        position: relative;
      }

      .modern-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        opacity: 0.3;
      }

      .header-content {
        position: relative;
        z-index: 1;
      }

      .header-icon {
        width: 60px;
        height: 60px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 15px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px); /* Compatibilidade Safari */
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .header-icon i {
        font-size: 24px;
        color: white;
      }

      .modern-header h2 {
        font-size: 28px;
        font-weight: 700;
        margin: 0 0 8px 0;
        color: white;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .header-subtitle {
        font-size: 16px;
        opacity: 0.9;
        margin: 0;
        font-weight: 300;
      }

      .modern-close {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px); /* Compatibilidade Safari */
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modern-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .modern-form {
        padding: 40px;
        background: #fafbfc;
        overflow-y: auto;
        max-height: calc(95vh - 250px);
        scrollbar-width: thin;
        scrollbar-color: var(--accent-color) #f0f0f0;
        /* Compatibilidade Safari */
        -webkit-scrollbar-width: thin;
        -webkit-scrollbar-color: var(--accent-color) #f0f0f0;
      }

      /* Estilização da scrollbar para o formulário moderno */
      .modern-form::-webkit-scrollbar {
        width: 8px;
      }

      .modern-form::-webkit-scrollbar-track {
        background: #f0f0f0;
        border-radius: 4px;
      }

      .modern-form::-webkit-scrollbar-thumb {
        background: var(--accent-color);
        border-radius: 4px;
      }

      .modern-form::-webkit-scrollbar-thumb:hover {
        background: var(--primary-color);
      }

      .form-section {
        margin-bottom: 35px;
        background: white;
        border-radius: 16px;
        padding: 25px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        border: 1px solid #f0f0f0;
      }

      .section-title {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid #f0f0f0;
        color: var(--primary-color);
        font-weight: 600;
        font-size: 18px;
      }

      .section-title i {
        color: var(--accent-color);
        font-size: 20px;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
      }

      .modern-group {
        position: relative;
      }

      .modern-group.full-width {
        grid-column: span 2;
      }

      .modern-label {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
        font-weight: 600;
        color: #2c3e50;
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .modern-label i {
        color: var(--accent-color);
        font-size: 16px;
      }

      .input-wrapper, .select-wrapper, .textarea-wrapper {
        position: relative;
      }

      .modern-input, .modern-select, .modern-textarea {
        width: 100%;
        padding: 16px 20px;
        border: 2px solid #e9ecef;
        border-radius: 12px;
        font-size: 15px;
        background: white;
        transition: all 0.3s ease;
        color: #2c3e50;
        font-weight: 500;
      }

      .modern-input:focus, .modern-select:focus, .modern-textarea:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 4px rgba(0, 5, 94, 0.1);
        transform: translateY(-2px);
      }

      .modern-textarea {
        resize: vertical;
        min-height: 100px;
        font-family: inherit;
      }

      .select-arrow {
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
        pointer-events: none;
        transition: transform 0.3s ease;
      }

      .modern-select:focus + .select-arrow {
        transform: translateY(-50%) rotate(180deg);
      }

      .input-focus-border, .textarea-focus-border {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--accent-color), var(--primary-color));
        transition: width 0.3s ease;
        border-radius: 0 0 12px 12px;
      }

      .modern-input:focus ~ .input-focus-border,
      .modern-textarea:focus ~ .textarea-focus-border {
        width: 100%;
      }

      .modern-actions {
        background: white;
        margin: 0 -40px -40px -40px;
        padding: 30px 40px;
        border-top: 1px solid #f0f0f0;
        border-radius: 0 0 20px 20px;
      }

      .action-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 15px;
        align-items: center;
      }

      .modern-btn {
        padding: 14px 28px;
        border-radius: 12px;
        font-weight: 600;
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 140px;
        justify-content: center;
      }

      .modern-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .modern-btn.btn-primary {
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        color: white;
        box-shadow: 0 4px 15px rgba(0, 5, 94, 0.3);
      }

      .modern-btn.btn-primary:hover {
        box-shadow: 0 8px 25px rgba(0, 5, 94, 0.4);
      }

      .modern-btn.btn-outline {
        background: white;
        color: #6c757d;
        border: 2px solid #e9ecef;
      }

      .modern-btn.btn-outline:hover {
        background: #f8f9fa;
        border-color: var(--accent-color);
        color: var(--accent-color);
      }

      .modern-btn.btn-danger {
        background: linear-gradient(135deg, #dc3545, #c82333);
        color: white;
        box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
      }

      .modern-btn.btn-danger:hover {
        box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
      }

      /* Responsividade para o modal moderno */
      @media (max-width: 768px) {
        .modern-modal {
          max-width: 95%;
          margin: 20px;
        }

        .modern-header {
          padding: 25px 20px;
        }

        .modern-form {
          padding: 25px 20px;
        }

        .form-grid {
          grid-template-columns: 1fr;
        }

        .modern-group.full-width {
          grid-column: span 1;
        }

        .action-buttons {
          flex-direction: column;
          width: 100%;
        }

        .modern-btn {
          width: 100%;
        }
      }

      /* Animações e microinterações */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .form-section {
        animation: slideInUp 0.6s ease forwards;
      }

      .form-section:nth-child(1) { animation-delay: 0.1s; }
      .form-section:nth-child(2) { animation-delay: 0.2s; }
      .form-section:nth-child(3) { animation-delay: 0.3s; }
      .form-section:nth-child(4) { animation-delay: 0.4s; }

      /* Hover effects para os campos */
      .modern-input:hover, .modern-select:hover, .modern-textarea:hover {
        border-color: #d1d5db;
        transform: translateY(-1px);
      }

      /* Placeholder styling */
      .modern-input::placeholder, .modern-textarea::placeholder {
        color: #9ca3af;
        font-weight: 400;
      }

      /* Status color indicators */
      .modern-select option[value="Ativo"] {
        color: #059669;
      }

      .modern-select option[value="Inativo"] {
        color: #dc2626;
      }

      .modern-select option[value="Lesionado"] {
        color: #d97706;
      }

      /* Estilos para o sistema de filtros */
      .filter-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .filter-checkbox {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 15px;
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        color: #2c3e50;
      }

      .filter-checkbox:hover {
        background: #e9ecef;
        border-color: var(--accent-color);
        transform: translateY(-2px);
      }

      .filter-checkbox input[type="checkbox"] {
        display: none;
      }

      .checkmark {
        width: 20px;
        height: 20px;
        border: 2px solid #ddd;
        border-radius: 6px;
        background: white;
        position: relative;
        transition: all 0.3s ease;
        flex-shrink: 0;
      }

      .filter-checkbox input[type="checkbox"]:checked + .checkmark {
        background: var(--accent-color);
        border-color: var(--accent-color);
      }

      .filter-checkbox input[type="checkbox"]:checked + .checkmark::after {
        content: '✓';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 14px;
        font-weight: bold;
      }

      .search-filter {
        margin-top: 20px;
      }

      /* Indicador de filtros ativos */
      .filter-indicator {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: var(--accent-color);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        margin-left: 10px;
      }

      .filter-indicator .filter-count {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
      }

      /* Responsividade para filtros */
      @media (max-width: 768px) {
        .filter-options {
          grid-template-columns: 1fr;
        }
        
        .filter-checkbox {
          padding: 12px;
        }
      }

      /* Estilos para o sistema de comparação */
      .compare-modal {
        max-width: 1000px;
      }

      .athlete-selection {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 30px;
        align-items: start;
        margin-top: 20px;
      }

      .athlete-selector {
        text-align: center;
      }

      .vs-divider {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: bold;
        color: var(--accent-color);
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        padding: 20px 0;
      }

      .athlete-preview {
        margin-top: 15px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 12px;
        border: 2px solid #e9ecef;
        min-height: 80px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .athlete-preview.has-athlete {
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        color: white;
        border-color: var(--accent-color);
      }

      .athlete-preview-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 20px;
        margin-bottom: 8px;
      }

      .athlete-preview-name {
        font-weight: 600;
        font-size: 14px;
        text-align: center;
      }

      .athlete-preview-sport {
        font-size: 12px;
        opacity: 0.9;
        margin-top: 4px;
      }

      /* Estatísticas de comparação */
      .comparison-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 25px 0;
      }

      .stat-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        border: 1px solid #f0f0f0;
        text-align: center;
      }

      .stat-header {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-bottom: 15px;
        color: var(--primary-color);
      }

      .stat-header h4 {
        margin: 0;
        font-size: 16px;
        font-weight: 600;
      }

      .stat-header i {
        font-size: 18px;
        color: var(--accent-color);
      }

      .stat-values {
        display: flex;
        justify-content: space-around;
        gap: 10px;
      }

      .stat-value {
        font-size: 18px;
        font-weight: bold;
        color: #2c3e50;
        padding: 8px 12px;
        background: #f8f9fa;
        border-radius: 8px;
        min-width: 60px;
        text-align: center;
      }

      /* Tabela de comparação */
      .comparison-table-container {
        margin: 25px 0;
      }

      .comparison-table-container h4 {
        margin-bottom: 15px;
        color: var(--primary-color);
        font-size: 18px;
      }

      .comparison-table {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        border: 1px solid #f0f0f0;
      }

      .comparison-row {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        border-bottom: 1px solid #f0f0f0;
      }

      .comparison-row:last-child {
        border-bottom: none;
      }

      .comparison-row.header {
        background: var(--primary-color);
        color: white;
        font-weight: 600;
        font-size: 14px;
      }

      .comparison-cell {
        padding: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        font-size: 14px;
      }

      .comparison-row:not(.header) .comparison-cell:first-child {
        background: #f8f9fa;
        font-weight: 600;
        color: var(--primary-color);
        justify-content: flex-start;
        padding-left: 20px;
      }

      .comparison-row:not(.header) .comparison-cell:last-child {
        background: #f0f8ff;
        font-weight: 600;
        color: var(--accent-color);
      }

      /* Seção de análise */
      .analysis-section {
        margin: 25px 0;
      }

      .analysis-section h4 {
        margin-bottom: 15px;
        color: var(--primary-color);
        font-size: 18px;
      }

      .analysis-content {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        border: 1px solid #f0f0f0;
        line-height: 1.6;
      }

      .analysis-content p {
        margin: 0;
        color: #2c3e50;
      }

      .analysis-highlight {
        background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 600;
      }

      /* Responsividade para comparação */
      @media (max-width: 768px) {
        .athlete-selection {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .vs-divider {
          order: -1;
          padding: 10px 0;
        }

        .comparison-stats {
          grid-template-columns: 1fr;
        }

        .comparison-table {
          font-size: 12px;
        }

        .comparison-cell {
          padding: 10px 8px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <aside class="sidebar">
      <div>
        <div class="sidebar-header">
          <img src="/static/img/logo_if.png?" alt="logo" width="230px" />
        </div>
        <ul class="menu-items">
          <li>
            <a href="/treinador/dashboard/{{ treinador.id }}"
              ><i class="fas fa-th-large"></i> <span data-translate="nav.dashboard">Dashboard</span></a
            >
          </li>
          <li>
            <a href="#" class="active"
              ><i class="fas fa-chart-bar"></i> <span data-translate="nav.dados_gerais">Dados Gerais</span></a
            >
          </li>
          <li>
            <a href="/treinador/treinamentos/{{ treinador.id }}"
              ><i class="fas fa-running"></i> <span data-translate="nav.treinamentos">Treinamentos</span></a
            >
          </li>
          <li>
            <a href="/treinador/calendario/{{ treinador.id }}"
              ><i class="fas fa-calendar-days"></i> <span data-translate="nav.calendario">Calendário</span></a
            >
          </li>
        </ul>
      </div>
      <div class="sidebar-footer">
        <a href="https://forms.office.com/" target="_blank"
          ><i class="fas fa-question-circle"></i> <span>Ajuda</span></a
        >
        <a href="/logout"><i class="fas fa-sign-out-alt"></i> <span>Sair</span></a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="header">
        <div class="user-info">
          <div class="user-avatar">JC</div>
          <div class="user-details">
                            <h4>...</h4>
                          <p>...</p>
          </div>
        </div>
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input type="text" id="searchAthlete" name="searchAthlete" placeholder="Pesquisar atleta..." />
        </div>
        <div class="header-actions">
          <div class="action-icon" onclick="showNotifications()" title="Notificações" aria-label="Ver notificações">
            <i class="fas fa-bell"></i>
          </div>
          <div class="action-icon" onclick="showSettings()" title="Configurações" aria-label="Abrir configurações">
            <i class="fas fa-cog"></i>
          </div>
        </div>
      </header>

      <!-- Page Title -->
      <div class="page-title">
        <h1 data-translate="dados_gerais.titulo">Dados Gerais</h1>
        <p data-translate="dados_gerais.subtitulo">Visualize e gerencie todos os atletas do instituto</p>
      </div>

      <!-- Athletes Table -->
      <div class="athletes-table-container">
        <div class="table-header">
          <div class="header-left">
          <h2 data-translate="lista_atletas.titulo">Lista de Atletas</h2>
            <span class="results-count" id="resultsCount"></span>
          </div>
          <div class="table-actions">
            <button class="btn btn-outline" onclick="showFilters()" id="filterBtn" title="Filtrar atletas" aria-label="Abrir filtros">
              <i class="fas fa-filter"></i> <span data-translate="lista_atletas.filtrar">Filtrar</span>
              <span class="filter-indicator" id="filterIndicator" style="display: none;">
                <span class="filter-count">0</span>
              </span>
            </button>
            <button class="btn btn-primary" onclick="openCompareModal()" title="Comparar atletas" aria-label="Abrir comparação de atletas">
              <i class="fas fa-area-chart"></i> <span data-translate="lista_atletas.comparar_atletas">Comparar Atletas</span>
            </button>
            <button class="btn btn-primary" onclick="addNewAthlete()" title="Adicionar novo atleta" aria-label="Criar novo atleta">
              <i class="fas fa-plus"></i> <span data-translate="lista_atletas.novo_atleta">+ Novo Atleta</span>
            </button>
          </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th data-translate="lista_atletas.coluna_atleta">Atleta</th>
                    <th data-translate="lista_atletas.coluna_modalidade">Modalidade</th>
                    <th data-translate="lista_atletas.coluna_idade">Idade</th>
                    <th data-translate="lista_atletas.coluna_status">Status</th>
                    <th data-translate="lista_atletas.coluna_acoes">Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for aluno in alunos %}
                <tr onclick="openAthleteModal({{ loop.index0 }})">
                    <td>
                        <div class="athlete-info">
                            <div class="athlete-avatar">
                                {{ aluno.nome.split(' ')[0][0] }}{{ aluno.nome.split(' ')[1][0] if aluno.nome.split(' ')|length > 1 else '' }}
                            </div>
                            <div class="athlete-details">
                                <h4>{{ aluno.nome }}</h4>
                                <p>{{ aluno.email }}</p>
                            </div>
                        </div>
                    </td>

                    <!-- Modalidade, idade e status (pode ser fixo ou depois vir do banco) -->
                    <td data-translate="modalidade.natacao">Natação</td>
                    <td>22 <span data-translate="lista_atletas.anos">anos</span></td>
                    <td><span class="status-badge status-active" data-translate="lista_atletas.status_ativo">Ativo</span></td>

                    <td>
                        <div class="action-buttons">
                            <div class="action-btn edit-btn" onclick="openAthleteModal({{ loop.index0 }}); event.stopPropagation();" title="Editar atleta" aria-label="Editar atleta">
                                <i class="fas fa-edit"></i>
                            </div>
                            <div class="action-btn evaluate-btn" onclick="avaliarAtleta(athletes[{{ loop.index0 }}]); event.stopPropagation();" title="Avaliar atleta" aria-label="Avaliar atleta">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="action-btn delete-btn" onclick="deleteAthlete({{ loop.index0 }}); event.stopPropagation();" title="Excluir atleta" aria-label="Excluir atleta">
                                <i class="fas fa-trash"></i>
                            </div>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>

        </table>
      </div>
    </main>

    <!-- Modal de Filtros -->
    <div id="filterModal" class="modal">
      <div class="modal-content modern-modal">
        <div class="modal-header modern-header">
          <div class="header-content">
            <div class="header-icon">
              <i class="fas fa-filter"></i>
            </div>
            <h2 data-translate="filtros.titulo">Filtros de Atletas</h2>
            <p class="header-subtitle" data-translate="filtros.subtitulo">Selecione os critérios para filtrar a lista</p>
          </div>
          <button class="close-modal modern-close" onclick="closeFilterModal()" title="Fechar filtros" aria-label="Fechar modal de filtros">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="modern-form">
          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-running"></i>
              <span data-translate="filtros.modalidade">Modalidade Esportiva</span>
            </div>
            <div class="filter-options">
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-natacao" value="Natação">
                <span class="checkmark"></span>
                🏊‍♀️ Natação
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-atletismo" value="Atletismo">
                <span class="checkmark"></span>
                🏃‍♂️ Atletismo
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-ginastica" value="Ginástica">
                <span class="checkmark"></span>
                🤸‍♀️ Ginástica
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-volei" value="Vôlei">
                <span class="checkmark"></span>
                🏐 Vôlei
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-futebol" value="Futebol">
                <span class="checkmark"></span>
                ⚽ Futebol
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-basquete" value="Basquete">
                <span class="checkmark"></span>
                🏀 Basquete
              </label>
            </div>
          </div>

          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-circle-check"></i>
              <span data-translate="filtros.status">Status do Atleta</span>
            </div>
            <div class="filter-options">
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-ativo" value="Ativo">
                <span class="checkmark"></span>
                🟢 Ativo
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-inativo" value="Inativo">
                <span class="checkmark"></span>
                🔴 Inativo
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-lesionado" value="Lesionado">
                <span class="checkmark"></span>
                🟡 Lesionado
              </label>
            </div>
          </div>

          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-birthday-cake"></i>
              <span data-translate="filtros.faixa_etaria">Faixa Etária</span>
            </div>
            <div class="filter-options">
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-18-20" value="18-20">
                <span class="checkmark"></span>
                 18-20 anos
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-21-25" value="21-25">
                <span class="checkmark"></span>
                 21-25 anos
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-26-30" value="26-30">
                <span class="checkmark"></span>
                 26-30 anos
              </label>
              <label class="filter-checkbox">
                <input type="checkbox" id="filter-30+" value="30+">
                <span class="checkmark"></span>
                 30+ anos
              </label>
            </div>
          </div>

          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-search"></i>
              <span data-translate="filtros.buscar_nome">Busca por Nome</span>
            </div>
            <div class="search-filter">
              <div class="input-wrapper">
                <input type="text" id="filter-name" class="modern-input" data-translate-placeholder="filtros.placeholder_nome">
                <div class="input-focus-border"></div>
              </div>
            </div>
          </div>

          <div class="modal-actions modern-actions">
            <div class="action-buttons">
              <button type="button" class="btn btn-outline modern-btn" onclick="clearAllFilters()" title="Limpar todos os filtros" aria-label="Remover todos os filtros aplicados">
                <i class="fas fa-eraser"></i>
                <span data-translate="filtros.limpar_filtros">Limpar Filtros</span>
              </button>
              <button type="button" class="btn btn-outline modern-btn" onclick="closeFilterModal()" title="Cancelar filtros" aria-label="Fechar modal sem aplicar filtros">
                <i class="fas fa-times"></i>
                Cancelar
              </button>
              <button type="button" class="btn btn-primary modern-btn" onclick="applyFilters()" title="Aplicar filtros" aria-label="Aplicar filtros selecionados">
                <i class="fas fa-check"></i>
                <span data-translate="filtros.aplicar_filtros">Aplicar Filtros</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para Editar/Adicionar Atleta -->
    <div class="modal" id="athleteModal">
      <div class="modal-content modern-modal">
        <div class="modal-header modern-header">
          <div class="header-content">
            <div class="header-icon">
              <i class="fas fa-user-plus"></i>
            </div>
            <h2 id="athleteModalTitle">Editar Atleta</h2>
            <p class="header-subtitle">Preencha as informações do atleta</p>
          </div>
          <button class="close-modal modern-close" onclick="closeAthleteModal()" title="Fechar modal" aria-label="Fechar modal de atleta">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <form id="athleteForm" class="modern-form">
          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-user"></i>
              <span>Informações Pessoais</span>
            </div>
            <div class="form-grid">
              <div class="form-group modern-group">
                <label for="athleteName" class="modern-label">
                  <i class="fas fa-signature"></i>
                  Nome Completo
                </label>
                <div class="input-wrapper">
                  <input type="text" id="athleteName" class="modern-input" required />
                  <div class="input-focus-border"></div>
          </div>
        </div>

              <div class="form-group modern-group">
                <label for="athleteEmail" class="modern-label">
                  <i class="fas fa-envelope"></i>
                  Email
                </label>
                <div class="input-wrapper">
                  <input type="email" id="athleteEmail" class="modern-input" required />
                  <div class="input-focus-border"></div>
            </div>
            </div>
            </div>
            </div>

          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-running"></i>
              <span>Informações Esportivas</span>
            </div>
            <div class="form-grid">
              <div class="form-group modern-group">
                <label for="athleteSport" class="modern-label">
                  <i class="fas fa-medal"></i>
                  Modalidade
                </label>
                <div class="select-wrapper">
                  <select id="athleteSport" class="modern-select" required>
                    <option value="">Selecione a modalidade</option>
                    <option value="Natação">🏊‍♀️ Natação</option>
                    <option value="Atletismo">🏃‍♂️ Atletismo</option>
                    <option value="Ginástica">🤸‍♀️ Ginástica</option>
                    <option value="Vôlei">🏐 Vôlei</option>
                    <option value="Futebol">⚽ Futebol</option>
                    <option value="Basquete">🏀 Basquete</option>
                  </select>
                  <i class="fas fa-chevron-down select-arrow"></i>
                </div>
              </div>
              
              <div class="form-group modern-group">
                <label for="athleteAge" class="modern-label">
                  <i class="fas fa-birthday-cake"></i>
                  Idade
                </label>
                <div class="input-wrapper">
                  <input type="number" id="athleteAge" class="modern-input" min="8" max="100" required />
                  <div class="input-focus-border"></div>
                </div>
            </div>
          </div>
        </div>

          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-info-circle"></i>
              <span>Status e Contato</span>
            </div>
            <div class="form-grid">
              <div class="form-group modern-group">
                <label for="athleteStatus" class="modern-label">
                  <i class="fas fa-circle-check"></i>
                  Status
                </label>
                <div class="select-wrapper">
                  <select id="athleteStatus" class="modern-select" required>
                    <option value="Ativo">🟢 Ativo</option>
                    <option value="Inativo">🔴 Inativo</option>
                    <option value="Lesionado">🟡 Lesionado</option>
                  </select>
                  <i class="fas fa-chevron-down select-arrow"></i>
            </div>
            </div>
              
              <div class="form-group modern-group">
                <label for="athletePhone" class="modern-label">
                  <i class="fas fa-phone"></i>
                  Telefone
                </label>
                <div class="input-wrapper">
                  <input type="tel" id="athletePhone" class="modern-input" placeholder="(11) 99999-9999" />
                  <div class="input-focus-border"></div>
                </div>
            </div>
          </div>
        </div>

          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-map-marker-alt"></i>
              <span>Localização e Observações</span>
            </div>
            <div class="form-group modern-group full-width">
              <label for="athleteAddress" class="modern-label">
                <i class="fas fa-home"></i>
                Endereço
              </label>
              <div class="input-wrapper">
                <input type="text" id="athleteAddress" class="modern-input" placeholder="Endereço completo" />
                <div class="input-focus-border"></div>
            </div>
            </div>
            
            <div class="form-group modern-group full-width">
              <label for="athleteNotes" class="modern-label">
                <i class="fas fa-sticky-note"></i>
                Observações
              </label>
              <div class="textarea-wrapper">
                <textarea id="athleteNotes" class="modern-textarea" rows="4" placeholder="Observações sobre o atleta..."></textarea>
                <div class="textarea-focus-border"></div>
            </div>
          </div>
        </div>

          <div class="modal-actions modern-actions">
            <div class="action-buttons">
              <button type="button" class="btn btn-outline modern-btn" onclick="closeAthleteModal()" title="Cancelar edição" aria-label="Fechar modal sem salvar">
                <i class="fas fa-times"></i>
                Cancelar
          </button>
              <button type="button" class="btn btn-danger modern-btn" id="deleteAthleteBtn" style="display: none;" onclick="confirmDeleteAthlete()" title="Excluir atleta" aria-label="Remover atleta permanentemente">
                <i class="fas fa-trash"></i>
                Excluir
              </button>
              <button type="submit" class="btn btn-primary modern-btn" title="Salvar alterações" aria-label="Salvar dados do atleta">
                <i class="fas fa-save"></i>
                Salvar Atleta
              </button>
        </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal para Comparar Atletas -->
    <div class="modal" id="compareModal">
      <div class="modal-content modern-modal compare-modal">
        <div class="modal-header modern-header">
          <div class="header-content">
            <div class="header-icon">
              <i class="fas fa-chart-line"></i>
            </div>
          <h2 data-translate="comparacao.titulo">Comparar Atletas</h2>
            <p class="header-subtitle" data-translate="comparacao.subtitulo">Analise e compare o desempenho dos atletas</p>
          </div>
          <button class="close-modal modern-close" onclick="closeCompareModal()" title="Fechar comparação" aria-label="Fechar modal de comparação">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="modern-form">
          <!-- Seleção de Atletas -->
          <div class="form-section">
            <div class="section-title">
              <i class="fas fa-users"></i>
              <span data-translate="comparacao.selecao_atletas">Seleção de Atletas</span>
            </div>
            <div class="athlete-selection">
              <div class="athlete-selector">
                <label for="athlete1" class="modern-label">
                  <i class="fas fa-user"></i>
                  <span data-translate="comparacao.primeiro_atleta">Primeiro Atleta</span>
                </label>
                <div class="select-wrapper">
                  <select id="athlete1" class="modern-select" onchange="updateAthletePreview(1)">
                    <option value="" data-translate="comparacao.selecione_primeiro">Selecione o primeiro atleta</option>
              </select>
                  <i class="fas fa-chevron-down select-arrow"></i>
            </div>
                <div class="athlete-preview" id="athlete1Preview"></div>
              </div>
              
              <div class="vs-divider">
                <span>VS</span>
              </div>
              
              <div class="athlete-selector">
                <label for="athlete2" class="modern-label">
                  <i class="fas fa-user"></i>
                  <span data-translate="comparacao.segundo_atleta">Segundo Atleta</span>
                </label>
                <div class="select-wrapper">
                  <select id="athlete2" class="modern-select" onchange="updateAthletePreview(2)">
                    <option value="" data-translate="comparacao.selecione_segundo">Selecione o segundo atleta</option>
              </select>
                  <i class="fas fa-chevron-down select-arrow"></i>
                </div>
                <div class="athlete-preview" id="athlete2Preview"></div>
            </div>
          </div>
        </div>

          <!-- Resultados da Comparação -->
          <div class="form-section" id="comparisonResults" style="display: none;">
            <div class="section-title">
              <i class="fas fa-chart-bar"></i>
              <span data-translate="comparacao.resultados_titulo">Resultados da Comparação</span>
              </div>
            
            <!-- Estatísticas de Performance -->
            <div class="comparison-stats">
              <div class="stat-card" id="stat1">
                <div class="stat-header">
                  <h4 data-translate="comparacao.frequencia">Frequência</h4>
                  <i class="fas fa-percentage"></i>
              </div>
                <div class="stat-values">
                  <span class="stat-value" id="freq1">-</span>
                  <span class="stat-value" id="freq2">-</span>
            </div>
              </div>
              
              <div class="stat-card" id="stat2">
                <div class="stat-header">
                  <h4 data-translate="comparacao.treinos_completos">Treinos Completos</h4>
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-values">
                  <span class="stat-value" id="treinos1">-</span>
                  <span class="stat-value" id="treinos2">-</span>
            </div>
          </div>

              <div class="stat-card" id="stat3">
                <div class="stat-header">
                  <h4 data-translate="comparacao.medalhas">Medalhas</h4>
                  <i class="fas fa-medal"></i>
              </div>
                <div class="stat-values">
                  <span class="stat-value" id="medalhas1">-</span>
                  <span class="stat-value" id="medalhas2">-</span>
              </div>
            </div>
            </div>

            <!-- Tabela de Comparação Detalhada -->
            <div class="comparison-table-container">
              <h4 data-translate="comparacao.comparacao_detalhada">Comparação Detalhada</h4>
              <div class="comparison-table">
                <div class="comparison-row header">
                  <div class="comparison-cell">Característica</div>
                  <div class="comparison-cell">Atleta 1</div>
                  <div class="comparison-cell">Atleta 2</div>
                  <div class="comparison-cell">Diferencial</div>
                </div>
                <div class="comparison-row" id="row-name">
                  <div class="comparison-cell">Nome</div>
                  <div class="comparison-cell" id="name1">-</div>
                  <div class="comparison-cell" id="name2">-</div>
                  <div class="comparison-cell">-</div>
                </div>
                <div class="comparison-row" id="row-sport">
                  <div class="comparison-cell" data-translate="comparacao.modalidade">Modalidade</div>
                  <div class="comparison-cell" id="sport1">-</div>
                  <div class="comparison-cell" id="sport2">-</div>
                  <div class="comparison-cell">-</div>
                </div>
                <div class="comparison-row" id="row-frequencia">
                  <div class="comparison-cell" data-translate="comparacao.frequencia">Frequência (%)</div>
                  <div class="comparison-cell" id="freq1-detail">-</div>
                  <div class="comparison-cell" id="freq2-detail">-</div>
                  <div class="comparison-cell" id="freq-diff">-</div>
                </div>
                <div class="comparison-row" id="row-resistencia">
                  <div class="comparison-cell">Resistência</div>
                  <div class="comparison-cell" id="resistencia1">-</div>
                  <div class="comparison-cell" id="resistencia2">-</div>
                  <div class="comparison-cell" id="resistencia-diff">-</div>
                </div>
                <div class="comparison-row" id="row-tecnica">
                  <div class="comparison-cell">Técnica</div>
                  <div class="comparison-cell" id="tecnica1">-</div>
                  <div class="comparison-cell" id="tecnica2">-</div>
                  <div class="comparison-cell" id="tecnica-diff">-</div>
                </div>
                <div class="comparison-row" id="row-forca">
                  <div class="comparison-cell">Força</div>
                  <div class="comparison-cell" id="forca1">-</div>
                  <div class="comparison-cell" id="forca2">-</div>
                  <div class="comparison-cell" id="forca-diff">-</div>
                </div>
                <div class="comparison-row" id="row-velocidade">
                  <div class="comparison-cell">Velocidade</div>
                  <div class="comparison-cell" id="velocidade1">-</div>
                  <div class="comparison-cell" id="velocidade2">-</div>
                  <div class="comparison-cell" id="velocidade-diff">-</div>
                </div>
                <div class="comparison-row" id="row-ultima-comp">
                  <div class="comparison-cell" data-translate="comparacao.ultima_competicao">Última Competição</div>
                  <div class="comparison-cell" id="ultima1">-</div>
                  <div class="comparison-cell" id="ultima2">-</div>
                  <div class="comparison-cell">-</div>
                </div>
          </div>
        </div>

            <!-- Análise e Recomendações -->
            <div class="analysis-section">
              <h4>Análise Comparativa</h4>
              <div class="analysis-content" id="analysisContent">
                <p>Selecione dois atletas para ver a análise comparativa.</p>
              </div>
            </div>
          </div>

          <div class="modal-actions modern-actions">
            <div class="action-buttons">
              <button type="button" class="btn btn-outline modern-btn" onclick="closeCompareModal()" title="Cancelar comparação" aria-label="Fechar modal sem comparar">
                <i class="fas fa-times"></i>
                <span data-translate="comparacao.fechar">Fechar</span>
          </button>
              <button type="button" class="btn btn-primary modern-btn" onclick="compareAthletes()" id="compareBtn" disabled title="Comparar atletas selecionados" aria-label="Iniciar comparação entre atletas">
                <i class="fas fa-chart-line"></i>
                <span data-translate="comparacao.comparar_atletas">Comparar Atletas</span>
          </button>
            </div>
          </div>
        </div>
      </div>
    </div>



    <script>

        // Função para carregar atletas via API

        async function carregarAtletas() {
            try {
                const response = await fetch('/api/alunos');
                if (!response.ok) {
                    throw new Error('Erro ao buscar atletas');
                }

                const athletes = await response.json();
                renderAthletes(athletes);
            } catch (error) {
                console.error('Erro:', error);
            }
        }

        // Função que insere os atletas na página
        function renderAthletes(athletes) {
            const tableBody = document.querySelector('#athletesTable tbody'); // ajuste o seletor se o ID for outro
            tableBody.innerHTML = ''; // limpa antes de renderizar

            athletes.forEach(atleta => {
                const row = document.createElement('tr');
                row.innerHTML = `
          <td>
            <div class="athlete-info">
              <div class="athlete-avatar">${atleta.nome[0]}${atleta.nome.split(' ')[1]?.[0] || ''}</div>
              <div class="athlete-details">
                <h4>${atleta.nome}</h4>
                <p>${atleta.email}</p>
              </div>
            </div>
          </td>
          <td>${atleta.esporte || 'N/A'}</td>
          <td>${atleta.status || 'Ativo'}</td>
        `;
                tableBody.appendChild(row);
            });
        }

        // Chama automaticamente ao carregar a página
        document.addEventListener('DOMContentLoaded', carregarAtletas);

        // Log para debug
        console.log("Array de atletas carregado:", athletes.length, "atletas");

        // Função para abrir o modal com os dados do atleta
        function openAthleteModal(index) {
            const athlete = athletes[index];
            document.getElementById("athleteModalTitle").textContent = "Editar Atleta";
            document.getElementById("athleteName").value = athlete.name;
            document.getElementById("athleteEmail").value = athlete.email;
            document.getElementById("athleteSport").value = athlete.sport;
            document.getElementById("athleteAge").value = athlete.age.replace(" anos", "");
            document.getElementById("athleteStatus").value = athlete.status;
            document.getElementById("athletePhone").value = athlete.phone || "";
            document.getElementById("athleteAddress").value = athlete.address || "";
            document.getElementById("athleteNotes").value = ""; // Limpar observações
            document.getElementById("deleteAthleteBtn").style.display = "block";

            // Armazenar o índice do atleta sendo editado
            document.getElementById("athleteModal").dataset.index = index;

            // Exibir modal
            document.getElementById("athleteModal").style.display = "flex";
        }

        // Abrir modal para criar novo atleta
        function addNewAthlete() {
            document.getElementById("athleteForm").reset();
            document.getElementById("athleteModalTitle").textContent = "Novo Atleta";
            document.getElementById("deleteAthleteBtn").style.display = "none";
            document.getElementById("athleteModal").dataset.index = "";
            document.getElementById("athleteModal").style.display = "flex";
        }

        // Fechar modal
        function closeAthleteModal() {
            document.getElementById("athleteModal").style.display = "none";
            document.getElementById("athleteForm").reset();
            document.getElementById("athleteModal").dataset.index = "";
        }

        // Salvar ou atualizar atleta
        function saveAthlete(event) {
            event.preventDefault(); // Evitar reload do form

            const name = document.getElementById("athleteName").value;
            const email = document.getElementById("athleteEmail").value;
            const sport = document.getElementById("athleteSport").value;
            const age = document.getElementById("athleteAge").value;
            const status = document.getElementById("athleteStatus").value;
            const phone = document.getElementById("athletePhone").value;
            const address = document.getElementById("athleteAddress").value;
            const notes = document.getElementById("athleteNotes").value;

            if (!name || !email || !sport || !age || !status) {
                alert("Por favor, preencha todos os campos obrigatórios.");
                return;
            }

            const index = document.getElementById("athleteModal").dataset.index;
            if (index !== undefined && index !== "") {
                // Editar atleta existente
                athletes[index] = {
                    ...athletes[index],
                    name, email, sport,
                    age: `${age} anos`,
                    status, phone, address
                };
                alert("Atleta atualizado com sucesso!");
            } else {
                // Criar novo atleta
                const newAvatar = String.fromCharCode(65 + Math.floor(Math.random() * 26));
                const newAthlete = {
                    id: Date.now(), // id temporário
                    name, avatar: newAvatar, sport,
                    age: `${age} anos`, status, phone, email, address,
                    birthdate: "01/01/2000",
                    gender: "Masculino",
                    position: "Desconhecido",
                    joinDate: "01/01/2023",
                    coach: "Não atribuído",
                    height: "1.70m",
                    weight: "65kg",
                    imc: "22.0"
                };
                athletes.push(newAthlete);
                alert("Atleta adicionado com sucesso!");
            }

            closeAthleteModal();
            updateTable(); // Atualiza tabela de atletas
        }

        // Excluir atleta
        function confirmDeleteAthlete() {
            const index = document.getElementById("athleteModal").dataset.index;
            if (index !== undefined && index !== "") {
                const athlete = athletes[index];
                if (confirm(`Tem certeza que deseja excluir ${athlete.name}?`)) {
                    athletes.splice(index, 1);
                    alert(`${athlete.name} foi removido do sistema`);
                    closeAthleteModal();
                    updateTable();
                }
            }
        }



        // Fechar modal clicando fora
        window.addEventListener("click", function (event) {
            if (event.target == document.getElementById("athleteModal")) {
                closeAthleteModal();
            }
            if (event.target == document.getElementById("filterModal")) {
                closeFilterModal();
            }
        });

        // Event listener para o formulário de atleta
        document.getElementById("athleteForm").addEventListener("submit", saveAthlete);
        

        // Inicializar a página
        document.addEventListener("DOMContentLoaded", function () {
            updateTable();
        });

        // Funções para o modal de comparação
        async function openCompareModal() {
            console.log("Abrindo modal de comparação...");

            // Preencher os selects com os atletas vindos do backend
            const athlete1Select = document.getElementById("athlete1");
            const athlete2Select = document.getElementById("athlete2");

            // Limpar selects
            const idiomaAtual = window.sistemaIdiomas ? window.sistemaIdiomas.obterIdiomaAtual() : 'pt';
            const traducoes = {
                pt: { primeiro: 'Selecione o primeiro atleta', segundo: 'Selecione o segundo atleta' },
                en: { primeiro: 'Select the first athlete', segundo: 'Select the second athlete' },
                es: { primeiro: 'Selecciona el primer atleta', segundo: 'Selecciona el segundo atleta' }
            };
            const traducao = traducoes[idiomaAtual] || traducoes.pt;

            athlete1Select.innerHTML = `<option value="">${traducao.primeiro}</option>`;
            athlete2Select.innerHTML = `<option value="">${traducao.segundo}</option>`;

            try {
                // 🔹 Buscar atletas do banco via API
                const response = await fetch('/api/alunos');
                if (!response.ok) throw new Error("Erro ao buscar atletas");

                const atletas = await response.json(); // lista real do backend
                window.atletasGlobais = atletas; // guarda globalmente pra usar depois

                // Adicionar atletas reais aos selects
                atletas.forEach((atleta) => {
                    const option1 = document.createElement("option");
                    option1.value = atleta.id;
                    option1.textContent = atleta.nome;
                    athlete1Select.appendChild(option1);

                    const option2 = document.createElement("option");
                    option2.value = atleta.id;
                    option2.textContent = atleta.nome;
                    athlete2Select.appendChild(option2);
                });

                // Esconder resultados e limpar previews
                document.getElementById("comparisonResults").style.display = "none";
                document.getElementById("athlete1Preview").innerHTML = "Selecione um atleta";
                document.getElementById("athlete2Preview").innerHTML = "Selecione um atleta";

                // Desabilitar botão de comparação
                document.getElementById("compareBtn").disabled = true;

                // Exibir o modal
                const modal = document.getElementById("compareModal");
                if (modal) {
                    modal.style.display = "flex";
                    console.log("Modal de comparação exibido com sucesso");
                } else {
                    console.error("Modal de comparação não encontrado");
                }

            } catch (error) {
                console.error("Erro ao abrir modal de comparação:", error);
                alert("Não foi possível carregar a lista de atletas.");
            }
        }

        function updateResultsCount() {
            const count = athletes.length; // ou use o array filtrado, se estiver aplicando filtros
            const span = document.getElementById("resultsCount");
            span.textContent = `${count} atleta${count !== 1 ? "s" : ""}`;
        }

        function closeCompareModal() {
            console.log("Fechando modal de comparação...");
            const modal = document.getElementById("compareModal");
            if (modal) {
                modal.style.display = "none";
                console.log("Modal de comparação fechado com sucesso");
            } else {
                console.error("Modal de comparação não encontrado para fechar");
            }
        }

        // Função para atualizar o preview do atleta
        function updateAthletePreview(athleteNum) {
            const select = document.getElementById(`athlete${athleteNum}`);
            const preview = document.getElementById(`athlete${athleteNum}Preview`);
            const selectedIndex = select.value;

            if (selectedIndex === "") {
                preview.innerHTML = "Selecione um atleta";
                preview.className = "athlete-preview";
            } else {
                const athlete = athletes[selectedIndex];
                preview.innerHTML = `
                <div class="athlete-preview-avatar">${athlete.avatar}</div>
                <div class="athlete-preview-name">${athlete.name}</div>
                <div class="athlete-preview-sport">${athlete.sport}</div>
              `;
                preview.className = "athlete-preview has-athlete";
            }

            // Verificar se ambos os atletas foram selecionados
            checkComparisonReady();
        }

        // Função para verificar se a comparação está pronta
        function checkComparisonReady() {
            const athlete1 = document.getElementById("athlete1").value;
            const athlete2 = document.getElementById("athlete2").value;
            const compareBtn = document.getElementById("compareBtn");

            console.log("Verificando se comparação está pronta:", athlete1, athlete2);

            if (athlete1 !== "" && athlete2 !== "" && athlete1 !== athlete2) {
                compareBtn.disabled = false;
                console.log("Botão de comparação habilitado");
            } else {
                compareBtn.disabled = true;
                console.log("Botão de comparação desabilitado");
            }
        }

        function compareAthletes() {
            console.log("Função compareAthletes chamada");

            const athlete1Index = document.getElementById("athlete1").value;
            const athlete2Index = document.getElementById("athlete2").value;

            console.log("Índices selecionados:", athlete1Index, athlete2Index);

            if (!athlete1Index || !athlete2Index) {
                alert("Por favor, selecione dois atletas para comparar.");
                return;
            }

            if (athlete1Index === athlete2Index) {
                alert("Por favor, selecione atletas diferentes para comparar.");
                return;
            }

            const athlete1 = athletes[athlete1Index];
            const athlete2 = athletes[athlete2Index];

            console.log("Atletas selecionados:", athlete1, athlete2);

            // Preencher estatísticas de performance
            document.getElementById("freq1").textContent = `${athlete1.performance.frequencia}%`;
            document.getElementById("freq2").textContent = `${athlete2.performance.frequencia}%`;

            document.getElementById("treinos1").textContent = athlete1.performance.treinosCompletos;
            document.getElementById("treinos2").textContent = athlete2.performance.treinosCompletos;

            document.getElementById("medalhas1").textContent = athlete1.performance.medalhas;
            document.getElementById("medalhas2").textContent = athlete2.performance.medalhas;

            // Preencher tabela de comparação de performance
            document.getElementById("name1").textContent = athlete1.name;
            document.getElementById("name2").textContent = athlete2.name;

            document.getElementById("sport1").textContent = athlete1.sport;
            document.getElementById("sport2").textContent = athlete2.sport;

            document.getElementById("freq1-detail").textContent = `${athlete1.performance.frequencia}%`;
            document.getElementById("freq2-detail").textContent = `${athlete2.performance.frequencia}%`;
            document.getElementById("freq-diff").textContent = calculateDifferential(athlete1.performance.frequencia, athlete2.performance.frequencia, '%');

            document.getElementById("resistencia1").textContent = athlete1.performance.resistencia;
            document.getElementById("resistencia2").textContent = athlete2.performance.resistencia;
            document.getElementById("resistencia-diff").textContent = calculateDifferential(athlete1.performance.resistencia, athlete2.performance.resistencia, '');

            document.getElementById("tecnica1").textContent = athlete1.performance.tecnica;
            document.getElementById("tecnica2").textContent = athlete2.performance.tecnica;
            document.getElementById("tecnica-diff").textContent = calculateDifferential(athlete1.performance.tecnica, athlete2.performance.tecnica, '');

            document.getElementById("forca1").textContent = athlete1.performance.forca;
            document.getElementById("forca2").textContent = athlete2.performance.forca;
            document.getElementById("forca-diff").textContent = calculateDifferential(athlete1.performance.forca, athlete2.performance.forca, '');

            document.getElementById("velocidade1").textContent = athlete1.performance.velocidade;
            document.getElementById("velocidade2").textContent = athlete2.performance.velocidade;
            document.getElementById("velocidade-diff").textContent = calculateDifferential(athlete1.performance.velocidade, athlete2.performance.velocidade, '');

            document.getElementById("ultima1").textContent = athlete1.performance.ultimaCompeticao;
            document.getElementById("ultima2").textContent = athlete2.performance.ultimaCompeticao;

            // Gerar análise comparativa
            generateAnalysis(athlete1, athlete2);

            // Mostrar resultados
            console.log("Tentando mostrar resultados da comparação");
            const resultsElement = document.getElementById("comparisonResults");
            if (resultsElement) {
                resultsElement.style.display = "block";
                console.log("Resultados da comparação exibidos com sucesso");
            } else {
                console.error("Elemento 'comparisonResults' não encontrado");
            }
        }

        // Função para calcular anos de experiência
        function calculateExperience(joinDate) {
            const join = new Date(joinDate.split('/').reverse().join('-'));
            const now = new Date();
            const diffTime = Math.abs(now - join);
            const diffYears = Math.ceil(diffTime / (1000 * 60 * 60 * 24 * 365));
            return diffYears;
        }

        // Função para extrair número de altura/peso
        function extractNumber(value) {
            if (typeof value === 'number') return value;
            if (typeof value === 'string') {
                return parseFloat(value.replace(/[^\d.]/g, ''));
            }
            return 0;
        }

        // Função para calcular diferencial
        function calculateDifferential(value1, value2, unit = '') {
            try {
                const num1 = extractNumber(value1);
                const num2 = extractNumber(value2);
                const diff = num1 - num2;

                if (isNaN(diff)) return '-';

                if (diff > 0) {
                    return `+${diff.toFixed(1)}${unit}`;
                } else if (diff < 0) {
                    return `${diff.toFixed(1)}${unit}`;
                } else {
                    return '0' + unit;
                }
            } catch (error) {
                console.error("Erro ao calcular diferencial:", error);
                return '-';
            }
        }

        // Função para gerar análise comparativa baseada em performance
        function generateAnalysis(athlete1, athlete2) {
            console.log("Gerando análise para:", athlete1.name, "vs", athlete2.name);

            const analysisContent = document.getElementById("analysisContent");
            if (!analysisContent) {
                console.error("Elemento 'analysisContent' não encontrado");
                return;
            }

            let analysis = "";

            // Análise de frequência nos treinos
            const freq1 = athlete1.performance.frequencia;
            const freq2 = athlete2.performance.frequencia;
            if (Math.abs(freq1 - freq2) > 10) {
                analysis += `<p><span class="analysis-highlight">${freq1 > freq2 ? athlete1.name : athlete2.name}</span> apresenta melhor frequência nos treinos (${Math.max(freq1, freq2).toFixed(1)}% vs ${Math.min(freq1, freq2).toFixed(1)}%), demonstrando maior comprometimento e disciplina.`;
            } else {
                analysis += `<p>Ambos os atletas têm frequência similar nos treinos (${freq1.toFixed(1)}% vs ${freq2.toFixed(1)}%), indicando comprometimento equilibrado.`;
            }

            // Análise de treinos completos
            const treinos1 = athlete1.performance.treinosCompletos;
            const treinos2 = athlete2.performance.treinosCompletos;
            if (Math.abs(treinos1 - treinos2) > 20) {
                analysis += `</p><p>Em relação aos treinos completos, <span class="analysis-highlight">${treinos1 > treinos2 ? athlete1.name : athlete2.name}</span> tem ${Math.max(treinos1, treinos2)} treinos contra ${Math.min(treinos1, treinos2)}, mostrando maior volume de trabalho.`;
            }

            // Análise de habilidades técnicas
            const tecnica1 = athlete1.performance.tecnica;
            const tecnica2 = athlete2.performance.tecnica;
            if (Math.abs(tecnica1 - tecnica2) > 1) {
                analysis += `</p><p>Na habilidade técnica, <span class="analysis-highlight">${tecnica1 > tecnica2 ? athlete1.name : athlete2.name}</span> se destaca (${Math.max(tecnica1, tecnica2).toFixed(1)} vs ${Math.min(tecnica1, tecnica2).toFixed(1)}), indicando maior refinamento técnico.`;
            }

            // Análise de força vs velocidade
            const forca1 = athlete1.performance.forca;
            const forca2 = athlete2.performance.forca;
            const vel1 = athlete1.performance.velocidade;
            const vel2 = athlete2.performance.velocidade;

            if (forca1 > forca2 && vel1 > vel2) {
                analysis += `</p><p><span class="analysis-highlight">${athlete1.name}</span> apresenta vantagem tanto em força (${forca1.toFixed(1)} vs ${forca2.toFixed(1)}) quanto em velocidade (${vel1.toFixed(1)} vs ${vel2.toFixed(1)}), sendo um atleta mais completo.`;
            } else if (forca2 > forca1 && vel2 > vel1) {
                analysis += `</p><p><span class="analysis-highlight">${athlete2.name}</span> apresenta vantagem tanto em força (${forca2.toFixed(1)} vs ${forca1.toFixed(1)}) quanto em velocidade (${vel2.toFixed(1)} vs ${vel1.toFixed(1)}), sendo um atleta mais completo.`;
            } else {
                analysis += `</p><p>Os atletas têm perfis complementares: ${athlete1.name} (Força: ${forca1.toFixed(1)}, Velocidade: ${vel1.toFixed(1)}) vs ${athlete2.name} (Força: ${forca2.toFixed(1)}, Velocidade: ${vel2.toFixed(1)}).`;
            }

            // Análise de competições
            const medalhas1 = athlete1.performance.medalhas;
            const medalhas2 = athlete2.performance.medalhas;
            if (Math.abs(medalhas1 - medalhas2) > 1) {
                analysis += `</p><p>Em competições, <span class="analysis-highlight">${medalhas1 > medalhas2 ? athlete1.name : athlete2.name}</span> tem mais medalhas (${Math.max(medalhas1, medalhas2)} vs ${Math.min(medalhas1, medalhas2)}), demonstrando melhor desempenho em competições.`;
            }

            // Análise de modalidade
            if (athlete1.sport === athlete2.sport) {
                analysis += `</p><p>Ambos competem na mesma modalidade (<span class="analysis-highlight">${athlete1.sport}</span>), facilitando comparações diretas de desempenho e ranking.`;
            } else {
                analysis += `</p><p>As modalidades são diferentes: <span class="analysis-highlight">${athlete1.sport}</span> vs <span class="analysis-highlight">${athlete2.sport}</span>. Cada modalidade tem suas próprias exigências e critérios de avaliação.`;
            }

            // Recomendações baseadas em performance
            analysis += `</p><p><strong>Recomendações de Treinamento:</strong> `;

            if (freq1 < 80 || freq2 < 80) {
                analysis += `Para o atleta com menor frequência, considere programas de motivação e acompanhamento mais próximo. `;
            }

            if (Math.abs(tecnica1 - tecnica2) > 1.5) {
                analysis += `Foque em exercícios técnicos para o atleta com menor pontuação técnica. `;
            }

            if (Math.abs(forca1 - forca2) > 1.5) {
                analysis += `Desenvolva programas de força específicos para equilibrar o desenvolvimento físico. `;
            }

            analysis += `Monitore regularmente o progresso e ajuste os treinamentos conforme necessário.`;

            analysisContent.innerHTML = analysis;
        }

        function renderTrainingsChart(
            athlete1Trainings,
            athlete2Trainings,
            athlete1Name,
            athlete2Name
        ) {
            const container = document.getElementById("trainingsChartContainer");
            container.innerHTML = `
        <div style="display: flex; height: 100%; align-items: flex-end; justify-content: space-around;">
          <div style="display: flex; flex-direction: column; align-items: center;">
            <div style="width: 50px; background: var(--primary-color); height: ${(athlete1Trainings / (athlete1Trainings + athlete2Trainings)) * 150
                }px; margin-bottom: 10px;"></div>
            <span>${athlete1Trainings}</span>
          </div>
          <div style="display: flex; flex-direction: column; align-items: center;">
            <div style="width: 50px; background: var(--info-color); height: ${(athlete2Trainings / (athlete1Trainings + athlete2Trainings)) * 150
                }px; margin-bottom: 10px;"></div>
            <span>${athlete2Trainings}</span>
          </div>
        </div>
        <div style="display: flex; justify-content: space-around; margin-top: 10px;">
          <span style="color: var(--primary-color);">${athlete1Name}</span>
          <span style="color: var(--info-color);">${athlete2Name}</span>
        </div>
      `;
        }

        function renderGoalsChart(
            athlete1Goals,
            athlete2Goals,
            athlete1Name,
            athlete2Name
        ) {
            const athlete1Percentage =
                (athlete1Goals.completed / athlete1Goals.total) * 100;
            const athlete2Percentage =
                (athlete2Goals.completed / athlete2Goals.total) * 100;

            const container = document.getElementById("goalsChartContainer");
            container.innerHTML = `
        <div style="display: flex; height: 100%; align-items: center; justify-content: space-around;">
          <div style="width: 45%;">
            <div style="background: #f0f0f0; height: 20px; border-radius: 10px; overflow: hidden;">
              <div style="background: var(--primary-color); width: ${athlete1Percentage}%; height: 100%;"></div>
            </div>
            <div style="text-align: center; margin-top: 5px;">${athlete1Percentage.toFixed(
                1
            )}%</div>
          </div>
          <div style="width: 45%;">
            <div style="background: #f0f0f0; height: 20px; border-radius: 10px; overflow: hidden;">
              <div style="background: var(--info-color); width: ${athlete2Percentage}%; height: 100%;"></div>
            </div>
            <div style="text-align: center; margin-top: 5px;">${athlete2Percentage.toFixed(
                1
            )}%</div>
          </div>
        </div>
        <div style="display: flex; justify-content: space-around; margin-top: 10px;">
          <span style="color: var(--primary-color);">${athlete1Name}</span>
          <span style="color: var(--info-color);">${athlete2Name}</span>
        </div>
      `;
        }

        // Fechar modal de comparação clicando fora
        window.addEventListener("click", function (event) {
            if (event.target == document.getElementById("compareModal")) {
                closeCompareModal();
            }
        });

        // Função de logout
        function logout() {
            if (confirm("Tem certeza que deseja sair?")) {
                window.location.href = "/";
            }
        }

        // Funções para os botões de ação do header
        function showNotifications() {
            // Usar o sistema de notificações reais
            if (window.sistemaNotificacoes) {
                window.sistemaNotificacoes.abrirPainel();
            } else {
                console.log('⚠️ Sistema de notificações não disponível');
            }
        }

        function showSettings() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            modal.innerHTML = `
              <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                  <h2>Configurações do Sistema</h2>
                  <button class="close-modal" onclick="this.parentElement.parentElement.parentElement.remove()" title="Fechar notificações" aria-label="Fechar modal de notificações">&times;</button>
                </div>
                <div class="settings-content">
                  <div class="form-group">
                    <label>Notificações por Email</label>
                    <input type="checkbox" id="emailNotifications" name="emailNotifications" checked>
                  </div>
                  <div class="form-group">
                    <label>Notificações Push</label>
                    <input type="checkbox" id="pushNotifications" name="pushNotifications" checked>
                  </div>
                  <div class="form-group">
                    <label>Idioma</label>
                    <select>
                      <option>Português</option>
                      <option>English</option>
                      <option>Español</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Tema</label>
                    <select>
                      <option>Claro</option>
                      <option>Escuro</option>
                      <option>Automático</option>
                    </select>
                  </div>
                </div>
                <div class="modal-actions">
                  <button class="btn btn-outline" onclick="this.parentElement.parentElement.parentElement.remove()" title="Cancelar configurações" aria-label="Fechar modal sem salvar">Cancelar</button>
                  <button class="btn btn-primary" title="Salvar configurações" aria-label="Salvar alterações nas configurações">Salvar</button>
                </div>
              </div>
            `;

            document.body.appendChild(modal);

            // Fechar modal ao clicar fora
            modal.addEventListener('click', function (e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Funções para os botões da tabela
        function showFilters() {
            document.getElementById("filterModal").style.display = "flex";
            updateFilterCount();
        }

        function closeFilterModal() {
            document.getElementById("filterModal").style.display = "none";
        }

        // Variáveis para armazenar os filtros ativos
        let activeFilters = {
            sports: [],
            status: [],
            ageRanges: [],
            name: ""
        };

        // Função para aplicar os filtros
        function applyFilters() {
            // Coletar filtros de modalidade
            activeFilters.sports = [];
            document.querySelectorAll('input[id^="filter-"]:checked').forEach(checkbox => {
                if (checkbox.id.includes('natacao') || checkbox.id.includes('atletismo') ||
                    checkbox.id.includes('ginastica') || checkbox.id.includes('volei') ||
                    checkbox.id.includes('futebol') || checkbox.id.includes('basquete')) {
                    activeFilters.sports.push(checkbox.value);
                }
            });

            // Coletar filtros de status
            activeFilters.status = [];
            document.querySelectorAll('input[id^="filter-"]:checked').forEach(checkbox => {
                if (checkbox.id.includes('ativo') || checkbox.id.includes('inativo') ||
                    checkbox.id.includes('lesionado')) {
                    activeFilters.status.push(checkbox.value);
                }
            });

            // Coletar filtros de faixa etária
            activeFilters.ageRanges = [];
            document.querySelectorAll('input[id^="filter-"]:checked').forEach(checkbox => {
                if (checkbox.id.includes('filter-18-20') || checkbox.id.includes('filter-21-25') ||
                    checkbox.id.includes('filter-26-30') || checkbox.id.includes('filter-30+')) {
                    activeFilters.ageRanges.push(checkbox.value);
                }
            });

            // Coletar busca por nome
            activeFilters.name = document.getElementById('filter-name').value.toLowerCase();

            // Fechar modal e aplicar filtros
            closeFilterModal();
            updateTable();
            updateFilterCount();
        }

        // Função para limpar todos os filtros
        function clearAllFilters() {
            // Desmarcar todos os checkboxes
            document.querySelectorAll('input[id^="filter-"]').forEach(checkbox => {
                checkbox.checked = false;
            });

            // Limpar campo de busca
            document.getElementById('filter-name').value = '';

            // Limpar filtros ativos
            activeFilters = {
                sports: [],
                status: [],
                ageRanges: [],
                name: ""
            };

            // Atualizar tabela e contador
            updateTable();
            updateFilterCount();
        }

        // Função para atualizar o contador de filtros ativos
        function updateFilterCount() {
            const totalFilters = activeFilters.sports.length + activeFilters.status.length +
                activeFilters.ageRanges.length + (activeFilters.name ? 1 : 0);

            const indicator = document.getElementById('filterIndicator');
            const countSpan = document.getElementById('filterIndicator').querySelector('.filter-count');

            if (totalFilters > 0) {
                indicator.style.display = 'inline-flex';
                countSpan.textContent = totalFilters;
            } else {
                indicator.style.display = 'none';
            }
        }

        // Função para verificar se um atleta passa pelos filtros
        function athletePassesFilters(athlete) {
            // Filtro por modalidade
            if (activeFilters.sports.length > 0 && !activeFilters.sports.includes(athlete.sport)) {
                return false;
            }

            // Filtro por status
            if (activeFilters.status.length > 0 && !activeFilters.status.includes(athlete.status)) {
                return false;
            }

            // Filtro por faixa etária
            if (activeFilters.ageRanges.length > 0) {
                const age = parseInt(athlete.age);
                let passesAgeFilter = false;

                activeFilters.ageRanges.forEach(range => {
                    if (range === '18-20' && age >= 18 && age <= 20) passesAgeFilter = true;
                    if (range === '21-25' && age >= 21 && age <= 25) passesAgeFilter = true;
                    if (range === '26-30' && age >= 26 && age <= 30) passesAgeFilter = true;
                    if (range === '30+' && age > 30) passesAgeFilter = true;
                });

                if (!passesAgeFilter) return false;
            }

            // Filtro por nome
            if (activeFilters.name && !athlete.name.toLowerCase().includes(activeFilters.name)) {
                return false;
            }

            return true;
        }

        function addNewAthlete() {
            document.getElementById("athleteModalTitle").textContent = "Adicionar Novo Atleta";
            document.getElementById("athleteName").value = "";
            document.getElementById("athleteEmail").value = "";
            document.getElementById("athleteSport").value = "";
            document.getElementById("athleteAge").value = "";
            document.getElementById("athleteStatus").value = "Ativo";
            document.getElementById("athletePhone").value = "";
            document.getElementById("athleteAddress").value = "";
            document.getElementById("athleteNotes").value = "";
            document.getElementById("deleteAthleteBtn").style.display = "none";
            document.getElementById("athleteModal").style.display = "flex";
        }

        // Função para salvar ou atualizar atleta
        function saveAthlete() {
            const name = document.getElementById("athleteName").value;
            const email = document.getElementById("athleteEmail").value;
            const sport = document.getElementById("athleteSport").value;
            const age = document.getElementById("athleteAge").value;
            const status = document.getElementById("athleteStatus").value;
            const phone = document.getElementById("athletePhone").value;
            const address = document.getElementById("athleteAddress").value;
            const notes = document.getElementById("athleteNotes").value;

            if (!name || !email || !sport || !age || !status) {
                alert("Por favor, preencha todos os campos obrigatórios.");
                return;
            }

            const index = document.getElementById("athleteModal").dataset.index; // Pegar o índice do atleta sendo editado
            if (index !== undefined) {
                athletes[index] = {
                    name: name,
                    avatar: athletes[index].avatar, // Manter o avatar original
                    sport: sport,
                    age: `${age} anos`,
                    status: status,
                    birthdate: athletes[index].birthdate, // Manter a data de nascimento original
                    gender: athletes[index].gender, // Manter o gênero original
                    phone: phone,
                    email: email,
                    address: address,
                    position: athletes[index].position, // Manter a posição original
                    joinDate: athletes[index].joinDate, // Manter a data de ingresso original
                    coach: athletes[index].coach, // Manter o treinador original
                    height: athletes[index].height, // Manter a altura original
                    weight: athletes[index].weight, // Manter o peso original
                    imc: athletes[index].imc, // Manter o IMC original
                };
                alert("Atleta atualizado com sucesso!");
            } else {
                // Adicionar novo atleta
                const newAvatar = String.fromCharCode(65 + Math.floor(Math.random() * 26)); // Gerar avatar aleatório
                athletes.push({
                    name: name,
                    avatar: newAvatar,
                    sport: sport,
                    age: `${age} anos`,
                    status: status,
                    birthdate: "01/01/2000", // Data padrão para novos atletas
                    gender: "Masculino", // Gênero padrão
                    phone: phone,
                    email: email,
                    address: address,
                    position: "Desconhecido", // Posição padrão
                    joinDate: "01/01/2023", // Data padrão para novos atletas
                    coach: "Não atribuído", // Treinador padrão
                    height: "1.70m", // Altura padrão
                    weight: "65kg", // Peso padrão
                    imc: "22.0", // IMC padrão
                });
                alert("Atleta adicionado com sucesso!");
            }
            closeAthleteModal();
            updateTable(); // Atualizar a tabela após salvar/editar
        }

        // Função para excluir atleta
        function confirmDeleteAthlete() {
            if (confirm("Tem certeza que deseja excluir este atleta?")) {
                const index = document.getElementById("athleteModal").dataset.index;
                if (index !== undefined) {
                    athletes.splice(index, 1);
                    alert("Atleta excluído com sucesso!");
                }
                closeAthleteModal();
                updateTable(); // Atualizar a tabela após excluir
            }
        }

        // Função para atualizar a tabela
        function updateTable() {
            const tbody = document.querySelector(".athletes-table-container table tbody");
            tbody.innerHTML = ""; // Limpar a tabela

            // Filtrar atletas baseado nos filtros ativos
            const filteredAthletes = athletes.filter(athlete => athletePassesFilters(athlete));

            // Atualizar contador de resultados
            const resultsCount = document.getElementById('resultsCount');
            const idiomaAtual = window.sistemaIdiomas ? window.sistemaIdiomas.obterIdiomaAtual() : 'pt';
            const traducoes = {
                pt: { atletas: 'atletas', de: 'de' },
                en: { atletas: 'athletes', de: 'of' },
                es: { atletas: 'atletas', de: 'de' }
            };
            const traducao = traducoes[idiomaAtual] || traducoes.pt;

            if (filteredAthletes.length === athletes.length) {
                resultsCount.textContent = `${athletes.length} ${traducao.atletas}`;
            } else {
                resultsCount.textContent = `${filteredAthletes.length} ${traducao.de} ${athletes.length} ${traducao.atletas}`;
            }

            // Mostrar mensagem se não houver resultados
            if (filteredAthletes.length === 0) {
                const noResultsRow = document.createElement("tr");
                noResultsRow.innerHTML = `
                <td colspan="6" style="text-align: center; padding: 40px; color: #666;">
                  <i class="fas fa-search" style="font-size: 48px; margin-bottom: 20px; display: block; color: #ddd;"></i>
                  <h3>Nenhum atleta encontrado</h3>
                  <p>Tente ajustar os filtros ou limpar todos os filtros para ver todos os atletas.</p>
                </td>
              `;
                tbody.appendChild(noResultsRow);
                return;
            }

            filteredAthletes.forEach((athlete, index) => {
                const row = document.createElement("tr");
                row.onclick = () => openAthleteModal(index); // Abrir modal ao clicar na linha

                const athleteCell = document.createElement("td");
                athleteCell.className = "athlete-info";
                athleteCell.innerHTML = `
                <div class="athlete-avatar">${athlete.avatar}</div>
                <div class="athlete-details">
                  <h4>${athlete.name}</h4>
                  <p>${athlete.email}</p>
                </div>
              `;

                const sportCell = document.createElement("td");
                // Mapear modalidades para traduções
                const modalidadeMap = {
                    'Natação': 'modalidade.natacao',
                    'Atletismo': 'modalidade.atletismo',
                    'Ginástica': 'modalidade.ginastica',
                    'Vôlei': 'modalidade.volei',
                    'Futebol': 'modalidade.futebol'
                };
                const translateKey = modalidadeMap[athlete.sport];
                if (translateKey) {
                    sportCell.setAttribute('data-translate', translateKey);
                }
                sportCell.textContent = athlete.sport;

                const ageCell = document.createElement("td");
                // Adicionar tradução para "anos"
                const ageNumber = athlete.age.replace(' anos', '');
                ageCell.innerHTML = `${ageNumber} <span data-translate="lista_atletas.anos">anos</span>`;

                const statusCell = document.createElement("td");
                const statusBadge = document.createElement("span");

                // Definir a classe correta baseada no status
                let statusClass = "status-active"; // padrão
                if (athlete.status === "Ativo") {
                    statusClass = "status-active";
                } else if (athlete.status === "Inativo") {
                    statusClass = "status-inactive";
                } else if (athlete.status === "Lesionado") {
                    statusClass = "status-lesionado";
                }

                statusBadge.className = `status-badge ${statusClass}`;

                // Mapear status para traduções
                const statusMap = {
                    'Ativo': 'lista_atletas.status_ativo',
                    'Inativo': 'lista_atletas.status_inativo',
                    'Lesionado': 'lista_atletas.status_lesionado'
                };
                const statusTranslateKey = statusMap[athlete.status];
                if (statusTranslateKey) {
                    statusBadge.setAttribute('data-translate', statusTranslateKey);
                }

                statusBadge.textContent = athlete.status;
                statusCell.appendChild(statusBadge);

                const actionsCell = document.createElement("td");
                const actionsDiv = document.createElement("div");
                actionsDiv.className = "action-buttons";

                const editBtn = document.createElement("div");
                editBtn.className = "action-btn edit-btn";
                editBtn.title = "Editar atleta";
                editBtn.setAttribute("aria-label", "Editar atleta");
                editBtn.onclick = (event) => {
                    event.stopPropagation(); // Evitar abrir o modal ao clicar no botão de editar
                    openAthleteModal(index);
                };
                editBtn.innerHTML = '<i class="fas fa-edit"></i>';

                const evaluateBtn = document.createElement("div");
                evaluateBtn.className = "action-btn evaluate-btn";
                evaluateBtn.title = "Avaliar atleta";
                evaluateBtn.setAttribute("aria-label", "Avaliar atleta");
                evaluateBtn.onclick = (event) => {
                    event.stopPropagation(); // Evitar abrir o modal ao clicar no botão de avaliar
                    avaliarAtleta(athlete);
                };
                evaluateBtn.innerHTML = '<i class="fas fa-star"></i>';
                evaluateBtn.title = "Avaliar Atleta";

                const deleteBtn = document.createElement("div");
                deleteBtn.className = "action-btn delete-btn";
                deleteBtn.title = "Excluir atleta";
                deleteBtn.setAttribute("aria-label", "Excluir atleta");
                deleteBtn.onclick = (event) => {
                    event.stopPropagation(); // Evitar abrir o modal ao clicar no botão de excluir
                    document.getElementById("athleteModal").dataset.index = index; // Passar o índice para o modal de confirmação
                    document.getElementById("athleteModalTitle").textContent = "Excluir Atleta";
                    document.getElementById("athleteName").value = athlete.name;
                    document.getElementById("athleteEmail").value = athlete.email;
                    document.getElementById("athleteSport").value = athlete.sport;
                    document.getElementById("athleteAge").value = athlete.age.replace(" anos", "");
                    document.getElementById("athleteStatus").value = athlete.status;
                    document.getElementById("athletePhone").value = athlete.phone;
                    document.getElementById("athleteAddress").value = athlete.address;
                    document.getElementById("athleteNotes").value = ""; // Limpar observações ao abrir para excluir
                    document.getElementById("deleteAthleteBtn").style.display = "block";
                    document.getElementById("athleteModal").style.display = "flex";
                };
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';

                actionsDiv.appendChild(editBtn);
                actionsDiv.appendChild(evaluateBtn);
                actionsDiv.appendChild(deleteBtn);
                actionsCell.appendChild(actionsDiv);

                console.log(`✅ Botões criados para ${athlete.name}:`, {
                    editBtn: editBtn.outerHTML,
                    evaluateBtn: evaluateBtn.outerHTML,
                    deleteBtn: deleteBtn.outerHTML,
                    actionsDiv: actionsDiv.outerHTML
                });

                row.appendChild(athleteCell);
                row.appendChild(sportCell);
                row.appendChild(ageCell);
                row.appendChild(statusCell);
                row.appendChild(actionsCell);

                tbody.appendChild(row);

                // Aplicar traduções para os elementos da linha recém-criada
                if (window.sistemaIdiomas) {
                    window.sistemaIdiomas.aplicarTraducoes(row);
                }
            });
        }

        // Função para avaliar atleta
        function avaliarAtleta(athlete) {
            console.log('🔄 Redirecionando para avaliação do atleta:', athlete);

            // Criar um ID temporário baseado no nome se não existir
            // Usar apenas o ID numérico do atleta
            if (!athlete.id) {
                alert('ID do atleta não encontrado. Não é possível avaliar este atleta.');
                return;
            }

            // Redirecionar para a página de avaliação
            window.location.href = `avaliar-atleta.html?id=${athlete.id}&nome=${encodeURIComponent(athlete.name)}&modalidade=${encodeURIComponent(athlete.sport)}`;
        }

        // Função para inicializar a página
        document.addEventListener("DOMContentLoaded", () => {
            updateTable(); // Atualizar a tabela ao carregar a página

            // =====================================================
            // INCLUSÃO DO ARQUIVO GLOBAL DE PERSONALIZAÇÃO
            // =====================================================

            // Carregar arquivo de personalização global
            const script = document.createElement('script');
            script.src = 'static/js/personalizar-usuario.js';
            script.onload = function () {
                // Carregar script de traduções
                const traducaoScript = document.createElement('script');
                traducaoScript.src = 'static/js/traducoes.js';
                traducaoScript.onload = function () {
                    // Inicializar sistema de idiomas
                    if (typeof SistemaIdiomas !== 'undefined') {
                        window.sistemaIdiomas = new SistemaIdiomas();
                        console.log('✅ Sistema de idiomas inicializado na página dados gerais');
                    } else {
                        console.log('⚠️ Classe SistemaIdiomas não encontrada');
                    }
                };
                document.head.appendChild(traducaoScript);

                // Carregar script de notificações
                const notifScript = document.createElement('script');
                notifScript.src = 'static/js/notificacoes.js';
                notifScript.onload = function () {
                    // Inicializar sistema de notificações
                    if (typeof SistemaNotificacoes !== 'undefined') {
                        window.sistemaNotificacoes = new SistemaNotificacoes();
                        console.log('✅ Sistema de notificações inicializado na página dados gerais');
                    } else {
                        console.log('⚠️ Classe SistemaNotificacoes não encontrada');
                    }
                };
                document.head.appendChild(notifScript);
                console.log('✅ [ATLETAS] Arquivo de personalização carregado');
                // Verificar se as funções globais estão disponíveis
                if (typeof carregarDadosUsuarioLogado === 'function') {
                    console.log('✅ [ATLETAS] Funções globais disponíveis');
                    // Carregar dados do usuário
                    carregarDadosUsuarioLogado();
                } else {
                    console.error('❌ [ATLETAS] Funções globais não encontradas');
                }
            };
            script.onerror = function () {
                console.error('❌ [ATLETAS] Erro ao carregar arquivo de personalização');
            };
            document.head.appendChild(script);
        });
    </script>
  </body>
</html>
